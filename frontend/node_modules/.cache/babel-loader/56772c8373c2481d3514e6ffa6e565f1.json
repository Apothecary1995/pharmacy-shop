{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\apothecary\\\\Downloads\\\\edd_pharmacy_project\\\\frontend\\\\src\\\\components\\\\Admin\\\\PendingOrders.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport orderService from '../../services/order.service';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PendingOrders = ({\n  refreshKey\n}) => {\n  _s();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const fetchPendingOrders = async () => {\n    setLoading(true);\n    try {\n      const res = await orderService.getAllOrders('pending_approval');\n      setOrders(res.data);\n    } catch (err) {\n      console.error(err);\n    }\n    setLoading(false);\n  };\n  useEffect(() => {\n    fetchPendingOrders();\n  }, [refreshKey]); // refreshKey değiştiğinde yeniden çek\n\n  const handleStatusUpdate = async (id, status) => {\n    try {\n      await orderService.updateOrderStatus(id, status);\n      fetchPendingOrders(); // Listeyi yenile\n    } catch (err) {\n      alert(\"Failed to update status.\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading pending orders...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Pending Orders (Awaiting Approval)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-list\",\n      children: orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No pending orders.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 32\n      }, this) : orders.map(o => {\n        var _o$prescription, _o$prescription2, _o$prescription3, _o$prescription4;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"order-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Order ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 18\n            }, this), \" \", o.id, \" | \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"User:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 54\n            }, this), \" \", o.user.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Total:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 18\n            }, this), \" $\", o.totalPrice, \" | \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Status:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 60\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"status-pending_approval\",\n              children: o.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 85\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Prescription ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 43,\n              columnNumber: 18\n            }, this), \" \", o.prescriptionId, \"(\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `status-${(_o$prescription = o.prescription) === null || _o$prescription === void 0 ? void 0 : _o$prescription.status}`,\n              children: (_o$prescription2 = o.prescription) === null || _o$prescription2 === void 0 ? void 0 : _o$prescription2.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 18\n            }, this), \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: o.orderItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [item.drug.name, \" (x\", item.quantity, \")\"]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '10px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleStatusUpdate(o.id, 'verified'),\n              className: \"btn btn-success\",\n              disabled: ((_o$prescription3 = o.prescription) === null || _o$prescription3 === void 0 ? void 0 : _o$prescription3.status) !== 'approved',\n              children: \"Verify Order\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleStatusUpdate(o.id, 'cancelled'),\n              className: \"btn btn-danger\",\n              style: {\n                marginLeft: '10px'\n              },\n              children: \"Cancel Order\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this), ((_o$prescription4 = o.prescription) === null || _o$prescription4 === void 0 ? void 0 : _o$prescription4.status) !== 'approved' && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: 'red',\n              fontSize: '0.9em',\n              marginTop: '5px'\n            },\n            children: \"Cannot verify order: Prescription is not approved yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 17\n          }, this)]\n        }, o.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n};\n_s(PendingOrders, \"xdzgW7pXcPRcraZDEI3R1ma24Bo=\");\n_c = PendingOrders;\nexport default PendingOrders;\nvar _c;\n$RefreshReg$(_c, \"PendingOrders\");","map":{"version":3,"names":["React","useState","useEffect","orderService","jsxDEV","_jsxDEV","PendingOrders","refreshKey","_s","orders","setOrders","loading","setLoading","fetchPendingOrders","res","getAllOrders","data","err","console","error","handleStatusUpdate","id","status","updateOrderStatus","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","className","length","map","o","_o$prescription","_o$prescription2","_o$prescription3","_o$prescription4","user","email","totalPrice","prescriptionId","prescription","orderItems","item","drug","name","quantity","style","marginTop","onClick","disabled","marginLeft","color","fontSize","_c","$RefreshReg$"],"sources":["C:/Users/apothecary/Downloads/edd_pharmacy_project/frontend/src/components/Admin/PendingOrders.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport orderService from '../../services/order.service';\r\n\r\nconst PendingOrders = ({ refreshKey }) => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchPendingOrders = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await orderService.getAllOrders('pending_approval');\r\n      setOrders(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPendingOrders();\r\n  }, [refreshKey]); // refreshKey değiştiğinde yeniden çek\r\n\r\n  const handleStatusUpdate = async (id, status) => {\r\n    try {\r\n      await orderService.updateOrderStatus(id, status);\r\n      fetchPendingOrders(); // Listeyi yenile\r\n    } catch (err) {\r\n      alert(\"Failed to update status.\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading pending orders...</p>;\r\n\r\n  return (\r\n    <div className=\"admin-section\">\r\n      <h3>Pending Orders (Awaiting Approval)</h3>\r\n      <div className=\"order-list\">\r\n        {orders.length === 0 ? <p>No pending orders.</p> : (\r\n          orders.map(o => (\r\n            <div key={o.id} className=\"order-item\">\r\n              <p><strong>Order ID:</strong> {o.id} | <strong>User:</strong> {o.user.email}</p>\r\n              <p><strong>Total:</strong> ${o.totalPrice} | <strong>Status:</strong> <span className=\"status-pending_approval\">{o.status}</span></p>\r\n              <p><strong>Prescription ID:</strong> {o.prescriptionId} \r\n                (<span className={`status-${o.prescription?.status}`}>{o.prescription?.status}</span>)\r\n              </p>\r\n              <ul>\r\n                {o.orderItems.map(item => (\r\n                  <li key={item.id}>{item.drug.name} (x{item.quantity})</li>\r\n                ))}\r\n              </ul>\r\n              <div style={{marginTop: '10px'}}>\r\n                <button \r\n                  onClick={() => handleStatusUpdate(o.id, 'verified')} \r\n                  className=\"btn btn-success\"\r\n                  disabled={o.prescription?.status !== 'approved'}\r\n                >\r\n                  Verify Order\r\n                </button>\r\n                <button onClick={() => handleStatusUpdate(o.id, 'cancelled')} className=\"btn btn-danger\" style={{marginLeft: '10px'}}>\r\n                  Cancel Order\r\n                </button>\r\n              </div>\r\n              {o.prescription?.status !== 'approved' && \r\n                <p style={{color: 'red', fontSize: '0.9em', marginTop: '5px'}}>\r\n                  Cannot verify order: Prescription is not approved yet.\r\n                </p>\r\n              }\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PendingOrders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}