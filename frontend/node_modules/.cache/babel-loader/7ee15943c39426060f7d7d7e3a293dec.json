{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\apothecary\\\\Downloads\\\\edd_pharmacy_project\\\\frontend\\\\src\\\\components\\\\Common\\\\DrugItem.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useCart } from '../../hooks/useCart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DrugItem = ({\n  drug,\n  onDrugSelect\n}) => {\n  _s();\n  const [quantity, setQuantity] = useState(1);\n  const {\n    cartItems,\n    addToCart,\n    updateQuantity\n  } = useCart();\n  const API_URL = process.env.REACT_APP_API_URL || \"http://localhost:8081\";\n  const existingCartItem = cartItems.find(item => item.id === drug.id);\n  const currentQuantityInCart = existingCartItem ? existingCartItem.quantity : 0;\n  const maxQuantity = drug.requiresPrescription ? 10 : 100; // Max 10 if RX\n  const remainingQuantityAllowed = maxQuantity - currentQuantityInCart;\n  const handleAddToCart = e => {\n    e.stopPropagation();\n    if (quantity > remainingQuantityAllowed) {\n      alert(`Max ${maxQuantity} unit allowed. You have ${currentQuantityInCart} in cart.`);\n      setQuantity(remainingQuantityAllowed > 0 ? remainingQuantityAllowed : 1);\n      return;\n    }\n    if (existingCartItem) {\n      updateQuantity(drug.id, currentQuantityInCart + quantity);\n    } else {\n      addToCart(drug, quantity);\n    }\n    alert(`${quantity} unit of ${drug.name} added to cart!`);\n    setQuantity(1);\n  };\n  const increaseQuantity = e => {\n    e.stopPropagation();\n    setQuantity(q => Math.min(q + 1, remainingQuantityAllowed));\n  };\n  const decreaseQuantity = e => {\n    e.stopPropagation();\n    setQuantity(q => Math.max(1, q - 1));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"drug-item\",\n    onClick: () => onDrugSelect(drug),\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: `${API_URL}${drug.imageUrl}` || `${API_URL}/images/placeholder.jpg`,\n      alt: drug.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drug-name\",\n      children: [drug.name, drug.requiresPrescription && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"prescription-badge\",\n        children: \"RX\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 39\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drug-description\",\n      children: drug.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"price\",\n      children: [\"$\", parseFloat(drug.price).toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quantity-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"quantity-btn\",\n        onClick: decreaseQuantity,\n        disabled: quantity === 1,\n        children: \"-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: quantity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"quantity-btn\",\n        onClick: increaseQuantity,\n        disabled: quantity === remainingQuantityAllowed || remainingQuantityAllowed <= 0,\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), remainingQuantityAllowed <= 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red',\n        fontSize: '0.9em',\n        height: '45px'\n      },\n      children: [\"Max \", maxQuantity, \" in cart.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 10\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn\",\n      onClick: handleAddToCart,\n      style: {\n        height: '45px'\n      },\n      children: \"Add to Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(DrugItem, \"ZzaAU2uVQrEH9qyZdGqVDuOQ55c=\", false, function () {\n  return [useCart];\n});\n_c = DrugItem;\nexport default DrugItem;\nvar _c;\n$RefreshReg$(_c, \"DrugItem\");","map":{"version":3,"names":["React","useState","useCart","jsxDEV","_jsxDEV","DrugItem","drug","onDrugSelect","_s","quantity","setQuantity","cartItems","addToCart","updateQuantity","API_URL","process","env","REACT_APP_API_URL","existingCartItem","find","item","id","currentQuantityInCart","maxQuantity","requiresPrescription","remainingQuantityAllowed","handleAddToCart","e","stopPropagation","alert","name","increaseQuantity","q","Math","min","decreaseQuantity","max","className","onClick","children","src","imageUrl","alt","fileName","_jsxFileName","lineNumber","columnNumber","description","parseFloat","price","toFixed","disabled","style","color","fontSize","height","_c","$RefreshReg$"],"sources":["C:/Users/apothecary/Downloads/edd_pharmacy_project/frontend/src/components/Common/DrugItem.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useCart } from '../../hooks/useCart';\r\n\r\nconst DrugItem = ({ drug, onDrugSelect }) => {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const { cartItems, addToCart, updateQuantity } = useCart();\r\n  const API_URL = process.env.REACT_APP_API_URL || \"http://localhost:8081\";\r\n\r\n  const existingCartItem = cartItems.find(item => item.id === drug.id);\r\n  const currentQuantityInCart = existingCartItem ? existingCartItem.quantity : 0;\r\n  \r\n  const maxQuantity = drug.requiresPrescription ? 10 : 100; // Max 10 if RX\r\n  const remainingQuantityAllowed = maxQuantity - currentQuantityInCart;\r\n\r\n  const handleAddToCart = (e) => {\r\n    e.stopPropagation();\r\n    \r\n    if (quantity > remainingQuantityAllowed) {\r\n      alert(`Max ${maxQuantity} unit allowed. You have ${currentQuantityInCart} in cart.`);\r\n      setQuantity(remainingQuantityAllowed > 0 ? remainingQuantityAllowed : 1);\r\n      return;\r\n    }\r\n    \r\n    if (existingCartItem) {\r\n      updateQuantity(drug.id, currentQuantityInCart + quantity);\r\n    } else {\r\n      addToCart(drug, quantity);\r\n    }\r\n    \r\n    alert(`${quantity} unit of ${drug.name} added to cart!`);\r\n    setQuantity(1);\r\n  };\r\n\r\n  const increaseQuantity = (e) => {\r\n    e.stopPropagation();\r\n    setQuantity(q => Math.min(q + 1, remainingQuantityAllowed));\r\n  };\r\n\r\n  const decreaseQuantity = (e) => {\r\n    e.stopPropagation();\r\n    setQuantity(q => Math.max(1, q - 1));\r\n  };\r\n\r\n  return (\r\n    <div className=\"drug-item\" onClick={() => onDrugSelect(drug)}>\r\n      <img src={`${API_URL}${drug.imageUrl}` || `${API_URL}/images/placeholder.jpg`} alt={drug.name} />\r\n      <div className=\"drug-name\">\r\n        {drug.name}\r\n        {drug.requiresPrescription && <span className=\"prescription-badge\">RX</span>}\r\n      </div>\r\n      <div className=\"drug-description\">{drug.description}</div>\r\n      <div className=\"price\">${parseFloat(drug.price).toFixed(2)}</div>\r\n      \r\n      <div className=\"quantity-controls\">\r\n        <button className=\"quantity-btn\" onClick={decreaseQuantity} disabled={quantity === 1}>-</button>\r\n        <span>{quantity}</span>\r\n        <button className=\"quantity-btn\" onClick={increaseQuantity} disabled={quantity === remainingQuantityAllowed || remainingQuantityAllowed <= 0}>+</button>\r\n      </div>\r\n      \r\n      {remainingQuantityAllowed <= 0 ? (\r\n         <p style={{color: 'red', fontSize: '0.9em', height: '45px'}}>Max {maxQuantity} in cart.</p>\r\n      ) : (\r\n         <button className=\"btn\" onClick={handleAddToCart} style={{height: '45px'}}>Add to Cart</button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DrugItem;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}